# vue2源码学习

## 学习资料

https://github.com/answershuto/learnVue

## 大纲
### 1. 响应式远离

```javascript
Object.defineProperty(obj, key, {
  enumerable: true,
  configurable: true,
  get: ()=>{
      /*....依赖收集等....*/
      return val
  },
  set:newVal=> {
      val = newVal;
      cb();/*订阅者收到消息的回调*/
  }
})
```

### 2.依赖收集

```javascript
class Dep {
    constructor () {
        this.subs = [];
    }

    addSub (sub: Watcher) {
        this.subs.push(sub)
    }

    removeSub (sub: Watcher) {
        remove(this.subs, sub)
    }
    /*Github:https://github.com/answershuto*/
    notify () {
        // stabilize the subscriber list first
        const subs = this.subs.slice()
        for (let i = 0, l = subs.length; i < l; i++) {
            subs[i].update()
        }
    }
}
function remove (arr, item) {
    if (arr.length) {
        const index = arr.indexOf(item)
        if (index > -1) {
            return arr.splice(index, 1)
        }
    }
}
```